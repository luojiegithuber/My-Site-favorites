{"version":3,"sources":["webpack:///src/components/up_blog_picture.vue","webpack:///./src/components/up_blog_picture.vue?2706","webpack:///./src/components/up_blog_picture.vue","webpack:///src/components/upload_blog.vue","webpack:///./src/components/upload_blog.vue?3911","webpack:///src/pages/BlogEditor.vue","webpack:///./src/components/upload_blog.vue","webpack:///./src/pages/BlogEditor.vue?1692","webpack:///./src/pages/BlogEditor.vue"],"names":["up_blog_picture","computed","blogData","this","$store","state","newBlogForm","data","filelist","blogData2","Object","imageUrl","methods","submit","$refs","upload","imgPreview","file","fileList","URL","createObjectURL","raw","handleAvatarSuccess","res","alert","$parent","all_close","beforeAvatarUpload","console","log","isJPG","type","isLt2M","size","$message","error","created","newBlogImgs","components_up_blog_picture","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","name","action","show-file-list","file-list","auto-upload","on-change","on-success","before-upload","src","_v","on","click","$event","staticRenderFns","src_components_up_blog_picture","__webpack_require__","normalizeComponent","ssrContext","upload_blog","props","contentFromDad","String","components","my-upblogpicture","dialogFormVisible","child_dialogFormVisible","form","title","maintype","date1","date2","content","isPublic","tag","note","test2","onSubmit","addNewBlogFormFun","dispatch","components_upload_blog","staticStyle","text-align","visible","update:visible","width","append-to-body","model","label-width","label","value","callback","$$v","$set","expression","placeholder","span","BlogEditor","my-uploadblog","upload_blog_normalizeComponent","loading","defaultData","img_file","change","e","$forceUpdate","open","child","$imgAdd","pos","$file","$imgDel","addPictures","_this","isLogin","formdata","FormData","_img","append","$axios","url","method","headers","Content-Type","then","i","md","$img2Url","mounted","message","pages_BlogEditor","directives","rawName","element-loading-text","element-loading-spinner","element-loading-background","padding","background-color","gutter","display","maxlength","show-word-limit","input","plain","ishljs","imgAdd","imgDel","BlogEditor_Component","BlogEditor_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/2.f600803ec1f30ae6cbd6.js","sourcesContent":["<template>\n  <div>\n  <el-upload\n    name=\"head\"\n    class=\"avatar-uploader\"\n    ref=\"upload\"\n    action=\"/api2/blogs/addNewBlog\"\n    :show-file-list=\"true\"\n    :file-list=\"filelist\"\n    :data=\"blogData2\"\n    :auto-upload=\"false\"\n    :on-change=\"imgPreview\"\n    :on-success=\"handleAvatarSuccess\"\n    :before-upload=\"beforeAvatarUpload\">\n    <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n    <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n  </el-upload>\n  <el-button type=\"primary\"  @click=\"submit()\">确认发表</el-button>\n  </div>\n</template>\n\n<script>\n    export default {\n      computed:{\n         blogData(){\n          return this.$store.state.newBlogForm\n            }\n      },\n\n      data() {\n        return {\n          filelist:[],\n          blogData2:Object(null),\n          imageUrl: '',\n          newBlogForm:[]\n        };\n      },\n      methods: {\n        submit(){\n          //console.log(this.$store.state.newBlogForm)\n          this.$refs.upload.submit()\n\n\n        },\n\n        imgPreview (file, fileList) {\n            //console.log(file)\n            this.imageUrl = URL.createObjectURL(file.raw);\n            this.blogData2=Object(this.$store.state.newBlogForm)\n            \n\n        },\n\n        handleAvatarSuccess(res, file) {\n          alert(\"发表成功\")\n          //将父亲的那个对话框顺带关闭\n          this.$parent.$parent.$parent.all_close();\n\n        },\n        beforeAvatarUpload(file) {\n          console.log(\"上传之前的携带数据：\")\n          console.log(this.blogData2)\n          console.log(this.filelist)\n\n          const isJPG = file.type === 'image/jpeg';\n          const isLt2M = file.size / 1024 / 1024 < 4;\n\n          if (!isJPG) {\n            this.$message.error('上传头像图片只能是 JPG 格式!');\n          }\n          if (!isLt2M) {\n            this.$message.error('上传头像图片大小不能超过 4MB!');\n          }\n          return isJPG && isLt2M;\n        }\n      },\n\n      created() {\n        this.filelist=this.$store.state.newBlogImgs\n      }\n    }\n</script>\n\n<style>\n  .avatar-uploader .el-upload {\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n    }\n    .avatar-uploader .el-upload:hover {\n      border-color: #409EFF;\n    }\n    .avatar-uploader-icon {\n      font-size: 28px;\n      color: #8c939d;\n      width: 178px;\n      height: 178px;\n      line-height: 178px;\n      text-align: center;\n    }\n    .avatar {\n      width: 178px;\n      height: 178px;\n      display: block;\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/up_blog_picture.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"name\":\"head\",\"action\":\"/api2/blogs/addNewBlog\",\"show-file-list\":true,\"file-list\":_vm.filelist,\"data\":_vm.blogData2,\"auto-upload\":false,\"on-change\":_vm.imgPreview,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"确认发表\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d20fa674\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/up_blog_picture.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d20fa674\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./up_blog_picture.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./up_blog_picture.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./up_blog_picture.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d20fa674\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./up_blog_picture.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/up_blog_picture.vue\n// module id = null\n// module chunks = ","\n<template>\n  <el-dialog style=\"text-align: left;\" title=\"上传文章\" :visible.sync=\"dialogFormVisible\">\n        <el-dialog\n          width=\"30%\"\n          title=\"为博客添加导览图\"\n          :visible.sync=\"child_dialogFormVisible\"\n          append-to-body>\n           <my-upblogpicture ref=\"up_picture\" style=\"text-align: center;\"></my-upblogpicture>\n        </el-dialog>\n\n\n\n<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n  <el-form-item label=\"文章标题\">\n    <el-input v-model=\"form.title\"></el-input>\n  </el-form-item>\n  <el-form-item label=\"主要类型\">\n    <el-select v-model=\"form.maintype\" placeholder=\"请选择活动区域\">\n      <el-option label=\"技术\" value=\"技术\"></el-option>\n      <el-option label=\"生活\" value=\"生活\"></el-option>\n    </el-select>\n  </el-form-item>\n  <el-form-item label=\"时间\">\n    <el-col :span=\"11\">\n      <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"form.date1\" style=\"width: 100%;\"></el-date-picker>\n    </el-col>\n    <el-col class=\"line\" :span=\"2\">-</el-col>\n    <el-col :span=\"11\">\n      <el-time-picker placeholder=\"选择时间\" v-model=\"form.date2\" style=\"width: 100%;\"></el-time-picker>\n    </el-col>\n  </el-form-item>\n  <el-form-item label=\"是否公开\">\n    <el-switch v-model=\"form.isPublic\"></el-switch>\n  </el-form-item>\n  <el-form-item label=\"标签\">\n    <el-checkbox-group v-model=\"form.tag\">\n      <el-checkbox label=\"前端\" name=\"tag\"></el-checkbox>\n      <el-checkbox label=\"算法/数据结构\" name=\"tag\"></el-checkbox>\n      <el-checkbox label=\"后端\" name=\"tag\"></el-checkbox>\n      <el-checkbox label=\"其他\" name=\"tag\"></el-checkbox>\n    </el-checkbox-group>\n  </el-form-item>\n\n  <el-form-item label=\"备注\">\n    <el-input type=\"textarea\" v-model=\"form.note\"></el-input>\n  </el-form-item>\n  <el-form-item>\n    <el-button type=\"primary\" @click=\"addNewBlogFormFun\">确认</el-button>\n    <el-button @click=\"test2()\">取消</el-button>\n  </el-form-item>\n</el-form>\n\n\n</el-dialog>\n</template>\n<script>\n\n  import upblogpicture from '@/components/up_blog_picture'\n\n  export default {\n    props: {\n        contentFromDad: {\n          type: String\n        }\n    },\n\n    components:{\n      'my-upblogpicture':upblogpicture\n    },\n\n    data() {\n      return {\n        dialogFormVisible:false,\n        child_dialogFormVisible:false,\n\n        //这个form最后和图片文件一起上传\n        form: {\n          title: '',\n          maintype: '',\n          date1: '',\n          date2: '',\n          content:'',\n          isPublic: true,\n          tag: [],\n          note: '',\n        }\n      }\n    },\n    methods: {\n      test2(){\n        console.log(this.form.tag)\n      },\n\n      onSubmit() {\n        //最终确认提交\n        console.log('submit!');\n\n      },\n      addNewBlogFormFun(){\n        //console.log(this.form);\n        this.$store.dispatch(\"addNewBlogFormFun\",this.form)//将表单数据添加进全局store\n\n        //再打开图片上传的控件\n        this.child_dialogFormVisible=true\n\n      },\n\n      all_close(){\n        this.child_dialogFormVisible=false\n        this.dialogFormVisible=false\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/upload_blog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticStyle:{\"text-align\":\"left\"},attrs:{\"title\":\"上传文章\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-dialog',{attrs:{\"width\":\"30%\",\"title\":\"为博客添加导览图\",\"visible\":_vm.child_dialogFormVisible,\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.child_dialogFormVisible=$event}}},[_c('my-upblogpicture',{ref:\"up_picture\",staticStyle:{\"text-align\":\"center\"}})],1),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"主要类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择活动区域\"},model:{value:(_vm.form.maintype),callback:function ($$v) {_vm.$set(_vm.form, \"maintype\", $$v)},expression:\"form.maintype\"}},[_c('el-option',{attrs:{\"label\":\"技术\",\"value\":\"技术\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"生活\",\"value\":\"生活\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('el-col',{attrs:{\"span\":11}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.form.date1),callback:function ($$v) {_vm.$set(_vm.form, \"date1\", $$v)},expression:\"form.date1\"}})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"line\",attrs:{\"span\":2}},[_vm._v(\"-\")]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":11}},[_c('el-time-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"选择时间\"},model:{value:(_vm.form.date2),callback:function ($$v) {_vm.$set(_vm.form, \"date2\", $$v)},expression:\"form.date2\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否公开\"}},[_c('el-switch',{model:{value:(_vm.form.isPublic),callback:function ($$v) {_vm.$set(_vm.form, \"isPublic\", $$v)},expression:\"form.isPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标签\"}},[_c('el-checkbox-group',{model:{value:(_vm.form.tag),callback:function ($$v) {_vm.$set(_vm.form, \"tag\", $$v)},expression:\"form.tag\"}},[_c('el-checkbox',{attrs:{\"label\":\"前端\",\"name\":\"tag\"}}),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"算法/数据结构\",\"name\":\"tag\"}}),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"后端\",\"name\":\"tag\"}}),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"其他\",\"name\":\"tag\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.note),callback:function ($$v) {_vm.$set(_vm.form, \"note\", $$v)},expression:\"form.note\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addNewBlogFormFun}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.test2()}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7388797f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/upload_blog.vue\n// module id = null\n// module chunks = ","<template>\n    <div\n    v-loading=\"loading\"\n    element-loading-text=\"正在等待博客里的图片上传哦······\"\n    element-loading-spinner=\"el-icon-loading\"\n    element-loading-background=\"rgba(0, 0, 0, 0.8)\">\n    \n      <div class=\"title-up\" style=\"padding: 10px 10px 10px 10px;background-color: #47484a;\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"16\">\n        <el-input\n          style=\"display: inline-block;\"\n          type=\"text\"\n          placeholder=\"请输入文本标题\"\n          v-model=\"title\"\n          maxlength=\"50\"\n          show-word-limit\n          @input=\"change($event)\"\n        ></el-input></el-col>\n        <el-col :span=\"8\">\n          <el-button type=\"info\" plain>保存为草稿</el-button>\n          <el-button type=\"primary\" @click=\"addPictures()\">发表博客</el-button>\n          </el-col>\n      </el-row>\n      </div>\n\n        <mavon-editor :ishljs = \"true\" v-model=\"value\" ref=md @imgAdd=\"$imgAdd\" @imgDel=\"$imgDel\"/>\n<!--\n            <mavon-editor\n              class=\"md\"\n              :value=\"value\"\n              :subfield = \"false\"\n              :defaultOpen = \"'preview'\"\n              :toolbarsFlag = \"false\"\n              :editable=\"false\"\n              :scrollStyle=\"true\"\n              :ishljs = \"true\"\n            ></mavon-editor>\n-->\n    <my-uploadblog ref=\"child\" :contentFromDad=\"value\"></my-uploadblog>\n\n    </div>\n\n\n\n\n</template>\n\n<script>\nimport uploadblog from '@/components/upload_blog';\n\nexport default {\n    components:{\n      'my-uploadblog':uploadblog\n    },\n\n\n    data() {\n        return {\n            loading:false,\n            value: '',\n            defaultData: \"preview\",\n            title:'',\n            img_file:[]\n        };\n    },\n\n\n    methods:{\n      change (e) {\n         this.$forceUpdate()\n      },\n      open(){\n       //打开对话框,传值给子组件\n          this.$refs.child.dialogFormVisible=true\n          this.$refs.child.form.title=this.title\n          this.$refs.child.form.content=this.value\n     },\n      $imgAdd (pos, $file){\n        this.img_file[pos] = $file;\n\n      },\n      $imgDel (pos){\n        delete this.img_file[pos[0]];\n      },\n      addPictures(){\n        if(!this.$store.state.isLogin){\n          this.$message.error('请登录，不然无法使用发表功能');\n          return 0\n        }\n\n        this.loading=true;\n\n        // 第一步.将图片上传到服务器.\n        var formdata = new FormData();\n        for(var _img in this.img_file){\n        formdata.append(_img, this.img_file[_img]);\n       }\n       formdata.append(\"_img\",\" this.img_file[_img]\");\n\n       //***************************\n         this.$axios({\n                url: '/api2/blogs/Picture_url',\n                method: 'post',\n                data: formdata,\n                headers: { 'Content-Type': 'multipart/form-data' },\n            }).then((res) => {\n                console.log(res)\n                /**\n                 * 例如：返回数据为 res = [[pos, url], [pos, url]...]\n                 * pos 为原图片标志（0）\n                 * url 为上传后图片的url地址\n                 */\n                 // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n                for (var i in res.data.data) {\n                    let pos=res.data.data[i][0]\n                    let url=res.data.data[i][1]\n                    this.$refs.md.$img2Url(pos, url);\n                }\n\n                this.loading=false;\n                this.open();\n            })\n       //*******************\n\n\n      }\n   },\n\n   mounted() {\n     if(!this.$store.state.isLogin){\n       this.$message({\n                 message: '您尚未登录，不可以使用发表功能',\n                 type: 'warning'\n        });\n     }\n   }\n};\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/BlogEditor.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload_blog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload_blog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7388797f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./upload_blog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/upload_blog.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"element-loading-text\":\"正在等待博客里的图片上传哦······\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[_c('div',{staticClass:\"title-up\",staticStyle:{\"padding\":\"10px 10px 10px 10px\",\"background-color\":\"#47484a\"}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":16}},[_c('el-input',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"type\":\"text\",\"placeholder\":\"请输入文本标题\",\"maxlength\":\"50\",\"show-word-limit\":\"\"},on:{\"input\":function($event){return _vm.change($event)}},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('el-button',{attrs:{\"type\":\"info\",\"plain\":\"\"}},[_vm._v(\"保存为草稿\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addPictures()}}},[_vm._v(\"发表博客\")])],1)],1)],1),_vm._v(\" \"),_c('mavon-editor',{ref:\"md\",attrs:{\"ishljs\":true},on:{\"imgAdd\":_vm.$imgAdd,\"imgDel\":_vm.$imgDel},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_vm._v(\" \"),_c('my-uploadblog',{ref:\"child\",attrs:{\"contentFromDad\":_vm.value}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ec00922\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/BlogEditor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ec00922\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BlogEditor.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogEditor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogEditor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ec00922\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./BlogEditor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/BlogEditor.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}